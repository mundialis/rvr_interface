<h2>DESCRIPTION</h2>

<em>r.extract.buildings</em> extracts buildings as vectors and
calculates height statistics (minimum, maximum, average, standard
deviation, median, percentile) and presumable number of stories using
an nDSM-raster, NDVI-raster, and FNK-vector (Flaechennutzungskatalog).
As certain area codes from the FNK are used, the class codes have to be
consistent. The extraction can be based on an image segmentation using
<a href="i.segment.html">i.segment</a>, which requires the <b>-s</b>
flag to be activated. Note that this significantly extends the
processing time.

<p>
A generic NDVI threshold is used to separate buildings from trees. This
threshold is defined by calculating the n-th percentile (indicated by
the <b>ndvi_perc</b> option) of NDVI values from all vegetated areas.
Vegetated areas are defined from the FNK-vector - therefore the class
codes have to be consistent. Alternatively, the NDVI threshold can be
defined as a fixed NDVI value (on a scale from 0-255).
<p>
Only buildings with a defined minimum size and minimum height are
extracted. The average story height is assumed to be 3 meters.

<h2>EXAMPLES</h2>

<h3>Extraction using default values and the 5th percentile as NDVI threshold</h3>

<div class="code"><pre>
r.extract.buildings ndsm=ndsm_raster ndvi_raster=ndvi_raster fnk_vector=FNK_Bottrop_2017 fnk_column=code_akt output=buildings_ndviperc5 ndvi_perc=5
</pre></div>

<h3>Extraction using a fixed NDVI threshold and a differing minimum size of buildings</h3>

<div class="code"><pre>
r.extract.buildings ndsm=ndsm_raster ndvi_raster=ndvi_raster fnk_vector=FNK_Bottrop_2017 fnk_column=code_akt output=buildings_ndvithresh148 ndvi_thresh=148 min_size=30
</pre></div>

<h2>SEE ALSO</h2>

<em>
<a href="r.mapcalc.html">r.mapcalc</a>,
<a href="i.segment.html">i.segment</a>,
<a href="r.quantile">r.quantile</a>
</em>

<h2>AUTHOR</h2>

Guido Riembauer, <a href="https://www.mundialis.de/">mundialis</a>, riembauer at mundialis.de
